{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/2018-04-18-react-fontawesomeを使ってみる/","result":{"data":{"markdownRemark":{"excerpt":"※ 2018/08/10 が v0.0 から v0.1 にアップグレードされ、仕様が変わったので記事を更新しました スピードの問題 Font Awesomeにはよくお世話になります。Font Asewome は通常下記のように JS…","html":"<p>※ 2018/08/10 <code class=\"language-text\">@fortawesome/react-fontawesome</code>が v0.0 から v0.1 にアップグレードされ、仕様が変わったので記事を更新しました</p>\n<h2>スピードの問題</h2>\n<p><a href=\"https://fontawesome.com/icons?d=gallery\">Font Awesome</a>にはよくお世話になります。Font Asewome は通常下記のように JS ファイルを読み込んで使用します。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://use.fontawesome.com/releases/v5.0.8/js/all.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>しかし、この方法だとフォントが表示されるまでに時間もかかってしまいます。また、レンダリングをブロックするらしく、PageSpeed Tools に改善事項として指摘されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/01f80ecbad1085bc3aa0c068858f1e88/331ea/20180418.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.69907407407408%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACh0lEQVQ4y31S7VLTQBTtO6mj4DCMryXjQB3fQhRhxnfQHyCIMOMwpVSxFdKkgXw32exuvnaTpq0nSQFH1DM3N2f35tx7c3db81IUsZfH3lSGsFLQ+TyfFkxGzqxM5v9Fa/uweLOXvN5NN/eync/y7ads6yDf2hebu8m7A7lzOIG9P6r89j1rPXnBVl/GT9tieSN99ipeWo+XNrKVdrzS5svr/OEae7TGVtvs8Qv24Pmf1uppydcB+XCk7HeMo2/ul57z8Vg5/u5h/0yNKq/FZyp4An5rZ2rcHfIWWhdp1O+duNYooh7xjB+9E07H2J/NZvP5FO8bX9bW8Mpa09lcyDwIyNgPLNuxHdf1PNOyDMP0vLFbG4jvBwhVUdcDZzyalNO6shBBEFiVwHAcxzRN27axpJQWRZHneXGDWy6lLMuyEkdRdHFxAc3l5aWmaVc1FEXBpqqq/X5/MBiA67qO7MPhsNvtgldHhSeOY8hQE4FOp4MsaAQypLi+vobg/Pz89PQUWRDCN57n3VVO0xRrQghjDA07NUCwyTmnNRDya4zHY0RBFuIkSZASYuguFcWybVSDr+tWD6IYVOMRwhbIQixEZpumrmkjdahrqj7SRpqq/By4lkF8z7zSr3Qd3UPcNBKGIchCnMncCblmuSPXNwJm+KEZsKETjHxuhLHm85BxdItqWZbJGjigm8oyD+M0FgVNJUkETSsLEuFFWRALhyWUcwy1GVKDyWSyEOdSEt+nhIQkgJEg4IyykBB/jC4jGmJMEDd3rkGTohIjJaMQ4F8CH3eNEM4YCUO0ijMDwdgx1L+LhZCWnzgk86mob1He3KRbfx9354xvfJoSLlgs83+j+A1YQvwLpXnOgXG4Fs0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PageSpeed Toolsでの警告画面\"\n        title=\"PageSpeed Toolsでの警告画面\"\n        src=\"/static/01f80ecbad1085bc3aa0c068858f1e88/d19c0/20180418.png\"\n        srcset=\"/static/01f80ecbad1085bc3aa0c068858f1e88/6b181/20180418.png 125w,\n/static/01f80ecbad1085bc3aa0c068858f1e88/5039d/20180418.png 250w,\n/static/01f80ecbad1085bc3aa0c068858f1e88/d19c0/20180418.png 500w,\n/static/01f80ecbad1085bc3aa0c068858f1e88/35c67/20180418.png 750w,\n/static/01f80ecbad1085bc3aa0c068858f1e88/331ea/20180418.png 864w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>JS の読み込みを非同期にして改善する方法も検討したのですが、少し面倒そうです。</p>\n<p>調べてみると、公式に<a href=\"https://github.com/FortAwesome/react-fontawesome\">@fortawesome/react-fontawesome\n</a>というパッケージが出ており、これを使えば改善できそうだったので挑戦してみました。</p>\n<h2>使い方</h2>\n<p>react-fontawesome では、読み込むフォントを明示的に指定し、サブセットを作成してから使用することになっています。\nこうすることで無駄なフォントを読み込まずに、速度を向上させています。</p>\n<p>Font Awesome には、solid, regular, light, brands など、いくつかの種類があります。\nこれらの種類のすべて読み込むこともできますし、指定した種類の特定のアイコンだけ読み込むこともできます。例えば下記のような感じです。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> library <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/fontawesome-svg-core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> brands <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-brands-svg-icons'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  faCheckSquare<span class=\"token punctuation\">,</span>\n  faCoffee<span class=\"token punctuation\">,</span>\n  faStar<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-solid-svg-icons'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faCalendarTimes <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-regular-svg-icons'</span><span class=\"token punctuation\">;</span>\n\nlibrary<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>brands<span class=\"token punctuation\">,</span> faCheckSquare<span class=\"token punctuation\">,</span> faCoffee<span class=\"token punctuation\">,</span> faStar<span class=\"token punctuation\">,</span> faCalendarTimes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>パッケージベンダ名は、@fontawesome ではなく @fo<strong>r</strong>tawesome なので注意してください。</p>\n<p>上記の例では、「brands」のすべてのフォントと、「solid」や「regular」のうち特定の 4 つのアイコンを指定して、サブセットを作成しています。</p>\n<p>毎回このような処理をコンポーネントごとに行うのは手間ですから、サブセット作成処理はレイアウトファイル等に記載しておくとよいでしょう。</p>\n<p>サブセットを作成したら、あとは各コンポーネントから下記のように呼び出すことができます。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FontAwesomeIcon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/react-fontawesome'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Beverage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>check-square<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    Favorite beverage: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>coffee<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    // solid, regularなどを明示的に指定したい場合\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">'fas'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'star'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">'far'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'star'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>react-fontawesome を使用することで、フォントがあらかじめ webpack でバンドルされるため、表示されるまでのスピードは劇的に改善しました。\nまた、PageSpeed Tools で改善事項として指摘されることもなくなりました。</p>\n<h2>参考</h2>\n<p><a href=\"https://github.com/FortAwesome/react-fontawesome\">react-fontawesome</a></p>","fields":{"slug":"/2018-04-18-react-fontawesomeを使ってみる/"},"frontmatter":{"title":"react-fontawesomeを使ってみる","summary":"Font Awesomeのスピードを改善するため、react-fontawesomeを使ってみました。","date":"2018-04-18T10:18:57+09:00","dateModified":"2018-08-10T08:18:57+09:00","thumbnail":"/blogImages/20180418.png"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2018-04-18-react-fontawesomeを使ってみる/","modifiedDate":"2018-08-10T08:18:57+09:00"}}}